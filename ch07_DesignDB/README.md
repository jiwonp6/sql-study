# ◎ 데이터베이스 설계

## * 데이터베이스 설계과정
  - 프로젝트의 진행단계
    - 폭포수(waterfall 모델)
      - 소프트웨어 공학에서 전통적으로 사용되는 모델
      - 각 단계를 순차적으로 진행 : 앞 단계가 끝나면 다음 단계 수행
         1. 프로젝트 계획
         2. 업무 분석
         3. 시스템 설계
         4. 프로그램 구현
         5. 테스트
         6. 유지보수
  - 데이터베이스의 생명 주기
    1. 요구사항 분석
      - 실제 사용할 사용자들의 요구사항을 듣고, 관리해야할 데이터의 종류를 이해하고, 분석해서 DB 구축의 범위 지정
    2. 설계
      - 분석된 요구사항을 기초로 데이터베이스 스키마를 도출
        - a. 개념적 모델링 : 요구사항에서 중요한 개념을 Entity로 도출하여 Entity 와 Relation의 도면 => ERD(ERDiagram)
        - b. 논리적 모델링 : 각 개념(Entity)을 관계 데이터 테이블로 구체화 매핑(mapping)
        - c. 물리적 모델링 : DB의 객체, 인덱스, 뷰 등을 정의
    3. 구현
      - 설계된 스키마를 DBMS에서 생성
    4. 테스트
      - 생성된 데이터베이스가 요구사항을 만족시키는지 검증. 필요한 경우 설계 수정.
    5. 유지보수
      - 데이터베이스를 운영하고, 운영 중 발생하는 사항에 대해 변경, 최적화, 모니터링

## * 요구사항 분석
 - 담당자와 인터뷰를 하거나 설문조사 등을 통하여 요구사항을 수집
 - 실제 문서를 수집하여 분석
 - 기존에 존재하는 DB를 분석
 - 워크숍을 열어서 사용자, 개발자, 분석가 (이해관계자) 등이 참여하여 요구사항을 정의하여 합의
 - 업무와 연관된 모든 부분을 살펴보고 분석

## * 설계 - 개념적 모델링
 - 수집되고 분석된 요구사항에서 업무의 핵심 개념을 추출
 - ER(Entity - Relation) 모델

 1. Entity
    - 개체를 추출 : 요구사항 분석에서 수집된 중요한 `명사`들을 찾아서 엔티티 후보로 선정
    - 특징
      - 유일한 식별자에 의해 식별이 가능
      - 업무 프로세스에서 사용하는 개념이어야 함
      - 실제로 존재하거나 추상적인 것 모두를 포함
      - 다른 엔티티와 구별되어야 함
      - 자신의 특징을 나타내는 속성을 포함해야 함
    - 이름
      - 가능하면 현업에서 사용하는 용어를 사용
      - 가능하면 약어를 사용하지 않음
 2. Attribute
    - 엔티티를 설명하는데 사용되는 자료
    - 단순속성 : 더 이상 분할되지 않는 속성 (ex : 이름)
    - 복합속성 : 여러개의 단순 속성으로 구성된 속성 (ex : frist_name, last_name)
    - 유도속성 : 다른 속성으로부터 계산되는 속성
    - 다중속성 : 하나의 엔티티가 여러개 값을 가질 수 있는 속성
    - 관계 추출
      - 반드시 비즈니스에 필요하고 저장, 관리해야 하는 정보
      - 하나의 속성은 하나의 값만 가지게 해야 함
 3. Relationship
    - 엔티티 간의 상호 연관이 있는 상태
    - 추출 : 요구사항 문장에서 개체(명사, 개념)간에 의미있는 `동사`를 찾음

## * 설계 - 논리적 모델링
- 개념적 모델링에서 만든 ER 다이어그램을 DBMS에 맞게 매핑하여
- 실제 데이터베이스에 구현하기 위한 모델을 만드는 과정
   - 개념적 모델링에서 추출하지 않은 상세 속성들을 모두 추출
   - 정규화, 표준화 등을 수행
- 논리적 모델링 연습
   - 온라인 도구 (무료)
      - [ERD cloud](https://www.erdcloud.com/)
      - [dbdiagram.io](https://dbdiagram.io/)
   - MySQL 워크벤치 모델링 도구

## * 설계 - 물리적 모델링
- 모델링된 논리적 설계를 바탕으로 실제 데이터베이스 시스템에서 사용될 물리적 구조 설계
- 연습
   - MySQL 워크벤치 모델링 도구
      - 1. 새 모델 생성 : File - new model
      - 2. 다이어그램 생성 : add diagram
      - 3. 다이어그램 작성 및 테이블 작성 : ER 다이어그램 작성하기
      - 4. 테이블 생성 : Database - Forward Engineer